# デバイス識別ガイド

## デバイスタイプの特徴

### 1. ラップトップ (Laptop)
**識別特徴:**
- 大きな長方形のスクリーン
- **下部にキーボードまたは水平な板が必ず存在**
- 横長のアスペクト比（通常 16:9 または 16:10）
- ノッチや切り抜きなし
- ベゼルは通常均一な太さ

**縦方向:**
- 矢印は常に上向き（↑）
- スクリーンは垂直方向が「縦」

### 2. タブレット (Tablet)
**識別特徴:**
- 大きな長方形のスクリーン
- **キーボードや水平な板がない**
- 正方形に近いアスペクト比（3:4 または 4:3）
- ノッチや切り抜きなし
- ベゼルは均一で比較的太い

**縦方向:**
- 縦向きの場合：矢印は上向き（↑）
- 横向きの場合：矢印は斜め上向き（↗）

### 3. スマートフォン (Smartphone)
**識別特徴:**
- 細長い長方形のスクリーン
- **上部に黒い切り抜き（ノッチ）または黒い楕円（ダイナミックアイランド）**
- 縦長のアスペクト比（通常 9:16 または 9:19.5）
- ベゼルは非常に薄い
- 角が丸い

**縦方向:**
- 縦向きの場合：矢印は上向き（↑）
- 横向きの場合：矢印は横向き（→）

## デバイス番号の割り当て

検出されたデバイスは、以下の優先順位で番号が割り当てられます：

1. **デバイス1**: 最も大きな面積を持つデバイス（通常はラップトップ）
2. **デバイス2**: 2番目に大きな面積を持つデバイス（通常はスマートフォンまたはタブレット）
3. **デバイス3**: 3番目に大きな面積を持つデバイス

## 視覚的な判定フロー

```
デバイスを見る
    ↓
キーボード/水平な板はあるか？
    ├─ YES → ラップトップ
    └─ NO
        ↓
    黒い切り抜き/楕円はあるか？
        ├─ YES → スマートフォン
        └─ NO → タブレット
```

## アスペクト比による補助判定

| デバイスタイプ | アスペクト比範囲 | 典型的な値 |
|--------------|-----------------|-----------|
| ラップトップ | 1.3 - 2.0 | 16/9 (1.78), 16/10 (1.6) |
| タブレット | 0.7 - 1.3 | 4/3 (1.33), 3/4 (0.75) |
| スマートフォン | 0.4 - 0.7 | 9/16 (0.56), 9/19.5 (0.46) |

## 画像の向きと回転

各デバイスタイプの画像は、検出された向きに基づいて適切に回転される必要があります：

- **ラップトップ**: 通常回転不要（0度）
- **タブレット**: 向きに応じて0度または90度
- **スマートフォン**: 縦向きの場合は0度、横向きの場合は90度または-90度

## 実装上の注意点

1. **面積ベースの検出を避ける**: デバイスの配置によって見た目の面積が変わるため、視覚的特徴を優先
2. **ノッチ検出の精度**: スマートフォンのノッチは小さいため、上部中央の狭い領域のみをチェック
3. **キーボード検出**: ラップトップの下部領域に暗いピクセルが集中しているかチェック
4. **アスペクト比は補助的に使用**: メインの判定は視覚的特徴で行い、アスペクト比は確認用